<div class="d-flex">
  <%= link_to "Create user", new_admin_path, data: {controller: "turbo"}, class: "btn btn-primary ms-auto mb-3" %>
</div>

<table class="table table-sm table-striped">
   <thead>
    <tr>
      <th scope="col">First name</th>
      <th scope="col">Father name</th>
      <th scope="col">Last name</th>
      <th scope="col">Email</th>
      <th scope="col">Role</th>
      <th scope="col">Action</th>
    </tr>
  </thead>
  <tbody>
    <% @users.each do |user| %>
        <tr>
            <td><%= user.first_name %></td>
            <td><%= user.father_name %></td>
            <td><%= user.last_name %></td>
            <td><%= user.email %></td>
            <td><%= user.role %></td>
            <td>
                <%= link_to "update", edit_admin_path(user), data: {controller: "turbo"}, class: "btn btn-primary btn-sm" %>
                
                <%# To hide reset and delete button for the current admin so that he/she wont reset or delete themselves %>
                <% if current_user != user %> 
                  <%= link_to "Reset", admin_reset_path(user), data: { 
                      turbo_method: :post, 
                      turbo_confirm: "Are you sure you want to reset #{user.first_name} #{user.father_name}'s password?"
                    }, class: "btn btn-primary btn-sm ms-2" %>

                  <%= link_to admin_path(user), data: {
                      turbo_method: :delete, 
                      turbo_confirm: "Are you sure you want to delete #{user.first_name} #{user.father_name}?"
                    }, class: "ms-2" do %>
                      <i class="bi bi-trash"></i>
                  <% end %>
                <% end %>
            </td>
        </tr>
    <% end %>
  </tbody>
</table>

